var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(o,l,n)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[l]=n,s=(e,o)=>{for(var l in o||(o={}))t.call(o,l)&&r(e,l,o[l]);if(n)for(var l of n(o))a.call(o,l)&&r(e,l,o[l]);return e};import{a5 as i,a6 as d,a7 as c,a8 as u,a9 as p,aa as m,ab as v,$ as f,ac as b,ad as P,ae as h,af as g,ag as j,ah as S,ai as O,aj as x,ak as C,H as y,al as T,am as k,an as w,ao as R,X as A,ap as I,b as F,r as $,e as D,u as V,B,w as E,aq as M,ar as H,as as N,at as _,au as q,av as z,aw as L,ax as U,a4 as W}from"./vendor.5173cf7d.js";/* empty css               *//* empty css                  *//* empty css                 *//* empty css               */import{g as X}from"./tsxHelper.25ebaa02.js";/* empty css                  *//* empty css                        *//* empty css                  *//* empty css                   */import{I as G}from"./InputPassword.6fc6aaf7.js";import{_ as J}from"./Editor.4ca83914.js";import{c as K,p as Q,b as Y,h as Z,j as ee}from"./index.17e476f5.js";const oe={Radio:i,Checkbox:d,CheckboxButton:d,Input:c,Autocomplete:u,InputNumber:p,Select:m,Cascader:v,Switch:f,Slider:b,TimePicker:P,DatePicker:h,Rate:g,ColorPicker:j,Transfer:S,Divider:O,TimeSelect:x,SelectV2:C,RadioButton:i,InputPassword:G,Editor:J},{t:le}=K();function ne(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!z(e)}const{getPrefixCls:te}=Y(),ae=te("form");var re=F({name:"Form",props:{schema:{type:Array,default:()=>[]},isCol:Q.bool.def(!0),model:{type:Object,default:()=>({})},autoSetPlaceholder:Q.bool.def(!0),isCustom:Q.bool.def(!1),labelWidth:Q.oneOfType([String,Number]).def("auto")},emits:["register"],setup(e,{slots:n,expose:t,emit:a}){const r=$(),i=$({}),d=$({}),c=D((()=>{const o=s({},e);return Object.assign(o,V(d)),o})),u=$({});B((()=>{var e;a("register",null==(e=V(r))?void 0:e.$parent,V(r))}));t({setValues:(e={})=>{u.value=Object.assign(V(u),e)},formModel:u,setProps:(e={})=>{d.value=Object.assign(V(d),e),i.value=e},delSchema:e=>{const{schema:o}=V(c),l=Z(o,(o=>o.field===e));l>-1&&o.splice(l,1)},addSchema:(e,o)=>{const{schema:l}=V(c);void 0===o?l.push(e):l.splice(o,0,e)},setSchema:e=>{const{schema:o}=V(c);for(const l of o)for(const o of e)l.field===o.field&&N(l,o.path,o.value)},getElFormRef:()=>V(r)}),E((()=>V(c).schema),((e=[])=>{u.value=((e,o)=>{const l=s({},o);return e.map((e=>{if(e.hidden)delete l[e.field];else if(e.component&&"Divider"!==e.component){const o=Reflect.has(l,e.field);l[e.field]=o?l[e.field]:void 0!==e.value?e.value:""}})),l})(e,V(u))}),{immediate:!0,deep:!0});const p=()=>{const{schema:e=[],isCol:o}=V(c);return e.filter((e=>!e.hidden)).map((e=>{let l;return"Divider"===e.component?y(oe.Divider,s({contentPosition:"left"},e.componentProps),{default:()=>[null==e?void 0:e.label]}):o?y(L,((e={})=>s(s({},e.span?{}:{xs:24,sm:12,md:12,lg:12,xl:12}),e))(e.colProps),ne(l=m(e))?l:{default:()=>[l]}):m(e)}))},m=e=>{var t,a;const r=["SelectV2","Cascader","Transfer"],i=s({},((e,o={},l)=>{const n={};for(const t in o)o[t]&&(n[t]=o=>X(e,`${l}-${t}`,o));return n})(n,null==(t=null==e?void 0:e.componentProps)?void 0:t.slots,e.field));"SelectV2"!==(null==e?void 0:e.component)&&"Cascader"!==(null==e?void 0:e.component)&&(null==(a=null==e?void 0:e.componentProps)?void 0:a.options)&&(i.default=()=>v(e));const d=((e,o)=>{const l={};return e[`${o}-error`]&&(l.error=l=>X(e,`${o}-error`,l)),e[`${o}-label`]&&(l.label=l=>X(e,`${o}-label`,l)),l})(n,e.field);return(null==e?void 0:e.labelMessage)&&(d.label=()=>y(W,null,[y("span",null,[e.label]),y(U,{placement:"right","raw-content":!0},{content:()=>y("span",{innerHTML:e.labelMessage},null),default:()=>y(ee,{icon:"ep:warning",size:16,color:"var(--el-color-primary)",class:"ml-2px relative top-1px"},null)})])),y(q,H(e.formItemProps||{},{prop:e.field,label:e.label||""}),(p=s({},d),m={default:()=>{var o,l;const t=oe[e.component],{autoSetPlaceholder:a}=V(c);return n[e.field]?X(n,e.field,{item:e}):y(t,H({modelValue:u.value[e.field],"onUpdate:modelValue":o=>u.value[e.field]=o},a&&(e=>{var o,l;return["Input","Autocomplete","InputNumber","InputPassword"].includes(null==e?void 0:e.component)?{placeholder:le("common.inputText")}:["Select","TimePicker","DatePicker","TimeSelect","TimeSelect"].includes(null==e?void 0:e.component)?["datetimerange","daterange","monthrange","datetimerange","daterange"].includes((null==(o=null==e?void 0:e.componentProps)?void 0:o.type)||(null==(l=null==e?void 0:e.componentProps)?void 0:l.isRange))?{startPlaceholder:le("common.startTimeText"),endPlaceholder:le("common.endTimeText"),rangeSeparator:"-"}:{placeholder:le("common.selectText")}:{}})(e),(e=>{const o=["ColorPicker"].includes(e.component)?s({},e.componentProps):s({clearable:!0},e.componentProps);return null==o||delete o.slots,o})(e),r.includes(null==e?void 0:e.component)&&(null==(o=null==e?void 0:e.componentProps)?void 0:o.options)?{options:(null==(l=null==e?void 0:e.componentProps)?void 0:l.options)||[]}:{}),s({},i))}},o(p,l(m))));var p,m},v=e=>{switch(e.component){case"Select":const{renderSelectOptions:o}=(e=>{const o=(o,l)=>{var n,t,a,r;const s=null==(t=null==(n=null==o?void 0:o.componentProps)?void 0:n.optionsAlias)?void 0:t.labelField,i=null==(r=null==(a=null==o?void 0:o.componentProps)?void 0:a.optionsAlias)?void 0:r.valueField;return y(T,{label:l[s||"label"],value:l[i||"value"]},{default:()=>{var n;return(null==(n=null==o?void 0:o.componentProps)?void 0:n.optionsSlot)?X(e,`${o.field}-option`,{item:l}):void 0}})};return{renderSelectOptions:e=>{var l,n,t,a;const r=null==(n=null==(l=null==e?void 0:e.componentProps)?void 0:l.optionsAlias)?void 0:n.labelField;return null==(a=null==(t=null==e?void 0:e.componentProps)?void 0:t.options)?void 0:a.map((l=>{var n;return(null==(n=null==l?void 0:l.options)?void 0:n.length)?y(k,{label:l[r||"label"]},{default:()=>{var n;return null==(n=null==l?void 0:l.options)?void 0:n.map((l=>o(e,l)))}}):o(e,l)}))}}})(n);return o(e);case"Radio":case"RadioButton":const{renderRadioOptions:l}={renderRadioOptions:e=>{var o,l,n,t,a,r;const s=null==(l=null==(o=null==e?void 0:e.componentProps)?void 0:o.optionsAlias)?void 0:l.labelField,i=null==(t=null==(n=null==e?void 0:e.componentProps)?void 0:n.optionsAlias)?void 0:t.valueField,d="Radio"===e.component?w:R;return null==(r=null==(a=null==e?void 0:e.componentProps)?void 0:a.options)?void 0:r.map((e=>y(d,{label:e[s||"value"]},{default:()=>[e[i||"label"]]})))}};return l(e);case"Checkbox":case"CheckboxButton":const{renderChcekboxOptions:t}={renderChcekboxOptions:e=>{var o,l,n,t,a,r;const s=null==(l=null==(o=null==e?void 0:e.componentProps)?void 0:o.optionsAlias)?void 0:l.labelField,i=null==(t=null==(n=null==e?void 0:e.componentProps)?void 0:n.optionsAlias)?void 0:t.valueField,d="Checkbox"===e.component?A:I;return null==(r=null==(a=null==e?void 0:e.componentProps)?void 0:a.options)?void 0:r.map((e=>y(d,{label:e[s||"value"]},{default:()=>[e[i||"label"]]})))}};return t(e)}};return()=>y(M,H({ref:r},(()=>{const e=["schema","isCol","autoSetPlaceholder","isCustom","model"],o=s({},V(c));for(const l in o)-1!==e.indexOf(l)&&delete o[l];return o})(),{model:e.isCustom?e.model:u,class:ae}),{default:()=>{const{isCustom:e}=V(c);return e?X(n,"default"):(()=>{let e;const{isCol:o}=V(c);return o?y(_,{gutter:20},ne(e=p())?e:{default:()=>[e]}):p()})()}})}});export{re as _};
