var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(n)for(var a of n(t))s.call(t,a)&&o(e,a,t[a]);return e};import{V as l,e as c,w as p,r as u,u as g,aT as m,y as d,aU as b,m as f}from"./vendor.5173cf7d.js";/* empty css                       *//* empty css                  *//* empty css                 *//* empty css                   */import{c as v}from"./index.65618426.js";const{t:y}=v(),w=e=>{const n=l({pageSize:10,currentPage:1,total:10,tableList:[],parmasObj:{},loading:!0,currentRow:null}),r=c((()=>{return{params:(e=i({},n.parmasObj.params),r={pageSize:n.pageSize,pageIndex:n.currentPage},t(e,a(r)))};var e,r}));p((()=>n.currentPage),(()=>{P.getList()})),p((()=>n.pageSize),(()=>{n.currentPage=1,P.getList()}));const s=u(),o=u(),v=async()=>{await f();const e=g(s);return e},w=async(t,a)=>{if(await((null==e?void 0:e.delListApi)&&(null==e?void 0:e.delListApi(t)))){d.success(y("common.delSuccess"));const e=(n.total%n.pageSize===a.length||1===n.pageSize)&&n.currentPage>1?n.currentPage-1:n.currentPage;n.currentPage=e,P.getList()}},P={getList:async()=>{var t;n.loading=!0;const a=await(null==e?void 0:e.getListApi(g(r)).catch((()=>{})).finally((()=>{n.loading=!1})));a&&(n.tableList=m(a.data||{},null==e?void 0:e.response.list),n.total=m(a.data||{},null==(t=null==e?void 0:e.response)?void 0:t.total)||0)},setProps:async(e={})=>{const t=await v();null==t||t.setProps(e)},setColumn:async e=>{const t=await v();null==t||t.setColumn(e)},getSelections:async()=>{const e=await v();return(null==e?void 0:e.selections)||[]},setSearchParmas:e=>{n.currentPage=1,n.parmasObj=Object.assign(n.parmasObj,{params:i({pageSize:n.pageSize,pageIndex:n.currentPage},e)}),P.getList()},delList:async(e,t,a=!0)=>{const r=await v();if(t){if(!(null==r?void 0:r.selections.length))return void d.warning(y("common.delNoData"))}else if(!n.currentRow)return void d.warning(y("common.delNoData"));const s={data:{ids:e}};a?b.confirm(y("common.delMessage"),y("common.delWarning"),{confirmButtonText:y("common.delOk"),cancelButtonText:y("common.delCancel"),type:"warning"}).then((async()=>{await w(s,e)})).catch((()=>{})):await w(s,e)}};return(null==e?void 0:e.props)&&P.setProps(e.props),{register:(e,t)=>{s.value=e,o.value=t},elTableRef:o,tableObject:n,methods:P}};export{w as u};
